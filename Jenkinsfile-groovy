import groovy.json.JsonSlurper
def cmd = ['/bin/bash', '-c', "git clone --single-branch https://github.com/AnastasiyaGapochkina01/bella_playbooks.git > /dev/null 2>&1 ; cd bella_playbooks ; git ls-tree -r origin/main  --name-only"]
def file_str = cmd.execute().text
//.join("\n")
def files = file_str.split('\n').collect { it }

properties(
    [
        parameters([
                string(defaultValue: 'dev', name: 'DEPLOY_ENV')
                //choice(choices: file_str, defaultValue: 'run.yml', name: "SERVICE")
        ])   
    ]
)  
node {
  env.TARGET = 'prod'
  stage('First stage'){
   print(files)
  }
}
