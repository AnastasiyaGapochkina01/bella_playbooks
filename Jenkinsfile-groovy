import groovy.io.FileType

def fileList = []

def dir = new File("your_repo_dir")
dir.eachFileRecurse (FileType.FILES) { file ->
  fileList << file
}


properties(
    [
        parameters([
                string(defaultValue: 'dev', name: 'DEPLOY_ENV')
                //choice(choices: fileList.join("\n"), name: "service")
        ])   
    ]
)  
node {
  env.TARGET = 'prod'
  stage('First stage'){
    echo "Hello from Scripted pipe with groovy on ${params.DEPLOY_ENV}"
    echo fileList
  }
}
